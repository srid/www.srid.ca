<html lang='en'>

<head>
  <meta charset='UTF-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <title>
    Obelisk tutorial, Markdown preview with Reflex – Sridhar Ratnakumar
  </title>
  <script type='text/javascript' src='https://cdn.jsdelivr.net/combine/npm/twind/twind.umd.min.js,npm/twind/observe/observe.umd.min.js'></script><script type='text/javascript'>twind.setup({})
twindObserve.observe(document.documentElement)</script>
  
    
      <meta property='og:description' content='Personal website of Sridhar Ratnakumar, software consultant specializing in Haskell.
' />
      <meta property='og:site_name' content='Srid' />
    
    
      <base href='/' />
      <link href='static/favicon.jpeg' rel='icon' />
    
    <link href='https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-tomorrow.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/combine/npm/prismjs@1.23.0/prism.min.js,npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js'></script>
<link rel='stylesheet' href='static/background-pattern.css' />

  
  <head-extra></head-extra>
</head>

<body class='overflow-y-scroll'>
  <!-- DoNotFormat -->
  
  <!-- DoNotFormat -->

  
    <div class='container mx-auto'>
      <!-- Header row-->
      <div class='grid grid-cols-12 md:px-2'>
        <!-- Logo column -->
        <div class='hidden md:mr-4 md:block md:col-span-3'>
          <div class='flex items-end h-full pl-2 mt-2 space-x-2'>
            <a href=''>
              
                
                  <img class='z-50 h-20 transition transform hover:scale-125 hover:opacity-80' src='static/favicon.jpeg' />
                
              
            </a>
          </div>
        </div>
        <!-- Title column -->
        <div class='col-span-12 md:col-span-9'>
          
  <div class='w-full text-gray-700'>
    <div class='flex justify-left'>
      <div class='bg-pink-100 md:rounded-b-lg w-full py-2 px-2 md:w-auto md:py-0 md:px-0'>
        <ul class='flex flex-wrap text-lg md:text-sm'>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href=''>
                Sridhar Ratnakumar
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href='software'>
                Software
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href='haskell'>
                Haskell
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href='reflex-frp'>
                Reflex-FRP
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href='obelisk'>
                Obelisk
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
        </ul>
      </div>
    </div>
  </div>


<h1 class='flex items-center justify-center mt-2 text-5xl font-extrabold text-black '>
  <a>
    Obelisk tutorial, Markdown preview with Reflex
  </a>
</h1>
        </div>
      </div>

      <!-- Main row-->
      <div class='grid grid-cols-12 px-2'>
        <!-- Sidebar column -->
        <nav class='hidden overflow-x-auto md:mr-4 md:block md:col-span-3 md:sticky md:top-0 md:h-screen'>
          <div class='flex flex-row float-right p-2 space-x-2 text-gray-500'>
            <a href='@tags' title='View tags'>
              <svg class='w-4 h-4 hover:text-pink-700' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z'>
                </path>
              </svg>
            </a>
            <a href='@index' title='Expand full tree'>
              <svg class='w-4 h-4 hover:text-pink-700' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4'>
                </path>
              </svg>
            </a>
          </div>
          <div class='pt-1 pb-2 rounded bg-pink-50 border-2 border-pink-200 shadow-inner'>
            
              <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Blog' href='blog'>
      Blog
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            
              <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Microblog' href='microblog'>
      Microblog
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            
              <!-- Variable bindings for this tree-->

  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='Projects' href='projects'>
      Projects
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Ema' href='ema'>
      Ema
    </a>
    
      
        <span class='text-gray-300' title='1 children inside'>
          1
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Emanote' href='emanote'>
      Emanote
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Neuron' href='neuron'>
      Neuron
    </a>
    
      
        <span class='text-gray-300' title='8 children inside'>
          8
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Experimental' href='projects-experimental'>
      Experimental
    </a>
    
      
        <span class='text-gray-300' title='2 children inside'>
          2
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
  
</div>
            
              <!-- Variable bindings for this tree-->

  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='Software' href='software'>
      Software
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='A brief F# exploration' href='fsharp-exploration'>
      A brief F# exploration
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Apps I use' href='apps'>
      Apps I use
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Dhall' href='dhall'>
      Dhall
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='Haskell' href='haskell'>
      Haskell
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Creating a new Haskell project with IDE support using Nix' href='haskell-new-project'>
      Creating a new Haskell project with IDE support using Nix
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Haskell Gotchas' href='haskell-gotchas'>
      Haskell Gotchas
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Heist mini-tutorial' href='heist-start'>
      Heist mini-tutorial
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='My release process for Haskell libraries' href='haskell-release-process'>
      My release process for Haskell libraries
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='Reflex-FRP' href='reflex-frp'>
      Reflex-FRP
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->

  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='Obelisk' href='obelisk'>
      Obelisk
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->

  
  


  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z'>
        </path>
      </svg>
      
  
    <a class='font-bold text-pink-600 hover:underline truncate' title='Obelisk tutorial, Markdown preview with Reflex' href='obelisk-tutorial'>
      Obelisk tutorial, Markdown preview with Reflex
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
  
</div>
    
  
</div>
    
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='ghcid' href='ghcid'>
      ghcid
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Linux' href='linux'>
      Linux
    </a>
    
      
        <span class='text-gray-300' title='3 children inside'>
          3
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Nix' href='nix'>
      Nix
    </a>
    
      
        <span class='text-gray-300' title='3 children inside'>
          3
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='No JavaScript' href='nojs'>
      No JavaScript
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Pass with GPG' href='pass'>
      Pass with GPG
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='PureScript' href='purescript'>
      PureScript
    </a>
    
      
        <span class='text-gray-300' title='1 children inside'>
          1
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Rust' href='rust'>
      Rust
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Satellite social network' href='satellite.earth'>
      Satellite social network
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='VSCode' href='vscode'>
      VSCode
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Windows' href='windows'>
      Windows
    </a>
    
      
        <span class='text-gray-300' title='1 children inside'>
          1
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
  
</div>
            
              <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Hardware' href='hw'>
      Hardware
    </a>
    
      
        <span class='text-gray-300' title='4 children inside'>
          4
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            
              <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Metacognition' href='metacog'>
      Metacognition
    </a>
    
      
        <span class='text-gray-300' title='2 children inside'>
          2
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            
              <!-- Variable bindings for this tree-->

  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Methods' href='methods'>
      Methods
    </a>
    
      
        <span class='text-gray-300' title='1 children inside'>
          1
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            
          </div>
        </nav>
        <!-- Main body column -->
        <div class='col-span-12 md:col-span-9'>
          <main>
            <article class='overflow-auto'>
              
    <p class='my-3'>
      In this article, I’ll describe how to get a full-stack Haskell application up and running. In particular, the app will render user-entered Markdown text in real-time (the final version is hosted at <a href='https://commonmark.srid.ca' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>https://commonmark.srid.ca</a>). Notably, our app will use Haskell even on the frontend. This is made possible by the <a href='https://github.com/ghcjs/ghcjs' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>GHCJS</a> compiler, that compiles Haskell code to JavaScript.
    </p>
  
    <p class='my-3'>
      We will not work directly with GHCJS, however, and instead will use the <a href='reflex-frp' title='WikiLinkNormal' class='text-pink-600 font-bold hover:underline'>Reflex-FRP</a> library, through the excellent <a href='obelisk' title='WikiLinkTag' class='text-pink-600 font-bold hover:underline'>Obelisk</a> full-stack framework.
    </p>
  <h2 id='create-an-obelisk-project' class='mt-4 mb-4 text-4xl font-bold text-gray-700'>Create an Obelisk project</h2>
    <p class='my-3'>
      First and foremost, make sure you have <a href='https://github.com/obsidiansystems/obelisk#installing-obelisk' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>Obelisk installed</a>, and then follow along.
    </p>
  
    <p class='my-3'>
      Obelisk includes a command called <code class='py-0.5 bg-gray-100 text-sm'>ob</code> that can be used to initialize a project. We will also use git to keep track of changes:
    </p>
  <div class='py-0.5 text-sm'><pre class='bash language-bash'><code class='bash language-bash'>mkdir MarkdownPreview
cd ./MarkdownPreview
# Create an Obelisk project
ob init
# Add to git
git init
git add .
git commit -m "first commit"</code></pre></div>
    <p class='my-3'>
      This gives us a project layout with three Haskell packages: <code class='py-0.5 bg-gray-100 text-sm'>backend</code>, <code class='py-0.5 bg-gray-100 text-sm'>common</code> and <code class='py-0.5 bg-gray-100 text-sm'>frontend</code>. As the names indicate, <code class='py-0.5 bg-gray-100 text-sm'>frontend</code> contains the Haskell code that ultimate gets compiled to JavaScript. The <code class='py-0.5 bg-gray-100 text-sm'>common</code> package however contains code that is shared between the backend and the frontend. This is extremely useful for type sharing, which is impossible with something like Elm or PureScript (without explicit conversion).
    </p>
  <div class='py-0.5 text-sm'><pre class='sh language-sh'><code class='sh language-sh'>backend
cabal.project
common
config
default.nix
frontend
shell.nix
static</code></pre></div>
    <p class='my-3'>
      You will notice that Obelisk uses <a href='nix' title='WikiLinkNormal' class='text-pink-600 font-bold hover:underline'>Nix</a> to build your project. The command <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> (described below) will abstract over the Nix stuff, including any GHCi handling, so you do not have to deal directly with Nix except for overriding dependencies.
    </p>
  <h2 id='running-hello-world' class='mt-4 mb-4 text-4xl font-bold text-gray-700'>Running hello world</h2>
    <p class='my-3'>
      Now, it is time to run our app.
    </p>
  <div class='py-0.5 text-sm'><pre class='sh language-sh'><code class='sh language-sh'>ob run</code></pre></div>
    <p class='my-3'>
      This command may take a while to finish the very first time it is run, as it would need to download packages from the Nix caches. At the end you would expect to see: <code class='py-0.5 bg-gray-100 text-sm'>Frontend running on http://localhost:8000/</code>. Your obelisk app will be accessible at that URL.
    </p>
  <h3 id='interlude-ob-run-reloads-your-code' class='mt-4 mb-2 text-3xl font-bold text-gray-700'>Interlude: <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> reloads your code</h3>
    <p class='my-3'>
      So what does this <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> command do? Think of it as <code class='py-0.5 bg-gray-100 text-sm'>stack run</code> or <code class='py-0.5 bg-gray-100 text-sm'>cabal run</code> - but it also recompiles changed sources and reloads application. <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> uses <a href='https://github.com/ndmitchell/ghcid' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>ghcid</a> underneath, in combination with custom <code class='py-0.5 bg-gray-100 text-sm'>ghci</code> config to specify the modules to reload.
    </p>
  
    <p class='my-3'>
      There is also <code class='py-0.5 bg-gray-100 text-sm'>ob repl</code> which gives you a GHCi repl for your project. As well as <code class='py-0.5 bg-gray-100 text-sm'>ob hoogle</code> providing a local Hoogle server for project and its dependencies.
    </p>
  <h2 id='add-commonmark-hs-dependency' class='mt-4 mb-4 text-4xl font-bold text-gray-700'>Add commonmark-hs dependency</h2>
    <p class='my-3'>
      Our application will use the Pure Haskell Markdown parser <a href='https://github.com/jgm/commonmark-hs' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>commonmark-hs</a>, which is written by the author of Pandoc, who intends to <a href='https://github.com/jgm/commonmark-hs/issues/1#issuecomment-395802118' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>migrate Pandoc over to it</a> eventually.
    </p>
  
    <p class='my-3'>
      We will also use the latest version from Git, instead of Hackage. Some <a href='https://nixos.org/nix/' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>Nix-fu</a> is helpful at this stage. But the main thing you need to know, in order to add a custom Haskell dependency, is the following general workflow:
    </p>
  <ul class='ml-4 space-y-1 list-disc list-inside'><li>Clone the git repo under a subdirectory</li><li>“Pack” it using <code class='py-0.5 bg-gray-100 text-sm'>ob thunk</code></li><li>Load it in <code class='py-0.5 bg-gray-100 text-sm'>default.nix</code> using <code class='py-0.5 bg-gray-100 text-sm'>hackGet</code></li></ul>
    <p class='my-3'>
      As briefly as possible, you would do this for commonmark-hs as follows:
    </p>
  <div class='py-0.5 text-sm'><pre class='sh language-sh'><code class='sh language-sh'># Get the source
git clone https://github.com/jgm/commonmark-hs.git dep/commonmark-hs
...
# Pack it
ob thunk pack dep/commonmark-hs
...</code></pre></div>
    <p class='my-3'>
      Next, edit your <code class='py-0.5 bg-gray-100 text-sm'>default.nix</code> and:
    </p>
  <ul class='ml-4 space-y-1 list-disc list-inside'><li>Add <code class='py-0.5 bg-gray-100 text-sm'>hackGet</code> and <code class='py-0.5 bg-gray-100 text-sm'>pkgs</code> as arguments to the <code class='py-0.5 bg-gray-100 text-sm'>project</code> if they don’t already exist</li><li>Use the packed thunk by calling <code class='py-0.5 bg-gray-100 text-sm'>hackGet</code></li><li>The git rep contains multiple Haskell packages; use <code class='py-0.5 bg-gray-100 text-sm'>commonmark</code> and <code class='py-0.5 bg-gray-100 text-sm'>commonmark-extensions</code></li></ul>
    <p class='my-3'>
      Here’s how your <code class='py-0.5 bg-gray-100 text-sm'>default.nix</code> should look:
    </p>
  <div class='py-0.5 text-sm'><pre class='nix language-nix'><code class='nix language-nix'>project ./. ({ pkgs, hackGet, ... }: {
  packages = let 
    commonmarkSrc = hackGet ./dep/commonmark-hs;
  in {
    commonmark = commonmarkSrc + "/commonmark";
    commonmark-extensions = commonmarkSrc + "/commonmark-extensions";
  };
  ...
})</code></pre></div>
    <p class='my-3'>
      If you run <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> at this point, it may complain about further missing dependencies. Let’s override each of them:
    </p>
  <div class='py-0.5 text-sm'><pre class='sh language-sh'><code class='sh language-sh'>git clone https://github.com/jgm/emojis.git dep/emojis
ob thunk pack dep/emojis</code></pre></div>
    <p class='my-3'>
      Go back to <code class='py-0.5 bg-gray-100 text-sm'>default.nix</code>, and add this new dependency to the <code class='py-0.5 bg-gray-100 text-sm'>packages</code> attribute:
    </p>
  <div class='py-0.5 text-sm'><pre class='nix language-nix'><code class='nix language-nix'>    ...
    emojis = hackGet ./dep/emojis;</code></pre></div>
    <p class='my-3'>
      As we will be using commonmark directly in the frontend, go ahead and add these to <code class='py-0.5 bg-gray-100 text-sm'>frontend.cabal</code> (under the library stanza):
    </p>
  <div class='py-0.5 text-sm'><pre class='haskell language-haskell'><code class='haskell language-haskell'>-- frontend/frontend.cabal
               ...
               , commonmark
               , commonmark-extensions
  </code></pre></div>
    <p class='my-3'>
      Restart <code class='py-0.5 bg-gray-100 text-sm'>ob run</code>, which should build the the new dependency before starting our app.
    </p>
  <h3 id='interlude-what-is-an-obelisk-thunk' class='mt-4 mb-2 text-3xl font-bold text-gray-700'>Interlude: What is an Obelisk thunk?</h3>
    <p class='my-3'>
      If you are familiar with <a href='https://www.srid.ca/1948201.html#overriding-dependencies' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>Haskell overrides in Nix</a>, then think of the obelisk thunk mechanism as an abstraction on top. A “packed” thunk is essentially similar to Nix’s <code class='py-0.5 bg-gray-100 text-sm'>fetchGit</code> in that you specify the exact source revision of the dependency to use.
    </p>
  
    <p class='my-3'>
      But a thunk can also be “unpacked”, using <code class='py-0.5 bg-gray-100 text-sm'>ob thunk unpack</code>, which – in addition to unpacking it as a git clone – has the effect of adding it to <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> and <code class='py-0.5 bg-gray-100 text-sm'>ob repl</code> sessions. For example, you could unpack the above commonmark thunk using <code class='py-0.5 bg-gray-100 text-sm'>ob thunk unpack dep/commonmark-hs</code> and restart <code class='py-0.5 bg-gray-100 text-sm'>ob run</code>. Now, when you hack on <code class='py-0.5 bg-gray-100 text-sm'>./dep/commonmark-hs</code> and change its Haskell sources, <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> will automatically reload the app using the modified commonmark-hs. See the Obelisk <a href='https://github.com/obsidiansystems/obelisk/blob/master/ChangeLog.md#v0500---2020-02-07' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>ChangeLog</a> for details.
    </p>
  <h2 id='lets-add-a-textbox' class='mt-4 mb-4 text-4xl font-bold text-gray-700'>Let’s add a textbox</h2>
    <p class='my-3'>
      If you are unfamiliar with Reflex, checkout <a href='https://reflex-frp.org/get-started' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>the official guide</a>. All our frontend code is defined in the <code class='py-0.5 bg-gray-100 text-sm'>frontend/src/Frontend.hs</code> file. With <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> running by side, open that module and try changing a few things, like the title - and the app should update. Let’s add a textbox element where the user would write their Markdown text.
    </p>
  
    <p class='my-3'>
      Somewhere in <code class='py-0.5 bg-gray-100 text-sm'>_frontend_body</code>, add the following:
    </p>
  <div class='py-0.5 text-sm'><pre class='haskell language-haskell'><code class='haskell language-haskell'>markdownText :: Dynamic t T.Text &lt;-
  fmap value $ textAreaElement $
    def
    & initialAttributes .~ ("style" =: "width:50%;height:15em;")</code></pre></div>
    <p class='my-3'>
      <code class='py-0.5 bg-gray-100 text-sm'>markdownText</code> is a reflex Dynamic that holds the user-entered text.
    </p>
  <h2 id='parse-markdown' class='mt-4 mb-4 text-4xl font-bold text-gray-700'>Parse Markdown</h2>
    <p class='my-3'>
      Now it is time to actually use the commonmark library. Let’s import it:
    </p>
  <div class='py-0.5 text-sm'><pre class='haskell language-haskell'><code class='haskell language-haskell'>import qualified Commonmark as CM

renderMarkdown :: T.Text -&gt; Either CM.ParseError (CM.Html ())
renderMarkdown =
  CM.commonmark "markdown"</code></pre></div>
    <p class='my-3'>
      The <code class='py-0.5 bg-gray-100 text-sm'>renderMarkdown</code> function will parse our Markdown and return the HTML representation of it. Calling <code class='py-0.5 bg-gray-100 text-sm'>show</code> on the Right value gets us the raw HTML.
    </p>
  <h2 id='render-to-html' class='mt-4 mb-4 text-4xl font-bold text-gray-700'>Render to HTML</h2>
    <p class='my-3'>
      Finally let’s plug everything together. We want to parse and render the resulting HTML every time the user changes the textbox. Reflex’s Dynamic automatically updates, so let’s use that.
    </p>
  <div class='py-0.5 text-sm'><pre class='haskell language-haskell'><code class='haskell language-haskell'>result &lt;- eitherDyn $ fmap renderMarkdown markdownText
dyn_ $ ffor result $ \case
  Left err -&gt;
    dyn_ $ ffor err $ \_ -&gt; text "Parse error"
  Right htmlVal -&gt;
    prerender_ blank $ void $ elDynHtml' "div" $ T.pack . show &lt;$&gt; htmlVal
</code></pre></div>
    <p class='my-3'>
      That’s all it takes! Now as you type the Markdown text, its live preview will automatically update next to the textbox.
    </p>
  
    <p class='my-3'>
      You can even hack on commonmark-hs (see the Obelisk thunk interlude above), and have <code class='py-0.5 bg-gray-100 text-sm'>ob run</code> automatically reload when the library sources change. This is extremely handy if you want to play with the internals of the Markdown parser and see its live result in the browser.
    </p>
  <h2 id='further-resources' class='mt-4 mb-4 text-4xl font-bold text-gray-700'>Further resources</h2><ul class='ml-4 space-y-1 list-disc list-inside'><li>
    <p class='my-3'>
      Source code for this app on Github: <a href='https://github.com/srid/MarkdownPreview' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>https://github.com/srid/MarkdownPreview</a>
    </p>
  </li><li>
    <p class='my-3'>
      Fully built version of it running at: <a href='https://commonmark.srid.ca/' title class='text-pink-600 hover:underline' target='_blank' rel='noopener'>https://commonmark.srid.ca/</a>
    </p>
  </li></ul>
            </article>
            
  <div class='p-4 mt-8 bg-gray-100 rounded'>
    <header class='mb-2 text-xl font-semibold text-gray-500'>Links to this page</header>
    <ul class='space-y-1'>
      
        <li>
          <a class='text-pink-600 font-bold hover:bg-pink-50' href='neuron-0.6'>
            Neuron 0.6 released
          </a>
          <div class='mb-4 overflow-auto text-sm text-gray-500'>
            <!-- TODO: How to style the backlinks list item element? Or render each separately?
                    -->
            <div><p>Previous versions of neuron used the <a href='https://hackage.haskell.org/package/mmark' title class='text-black-600 hover:underline' target='_blank' rel='noopener'>mmark</a> parser which advertises itself as being “strict”. This prevented certain links from working as they caused the parser to fail. In version 0.6, I switched over to use <a href='https://github.com/jgm/commonmark-hs' title class='text-black-600 hover:underline' target='_blank' rel='noopener'>commonmark-hs</a>, which is the Haskell implementation of the <a href='https://commonmark.org/' title class='text-black-600 hover:underline' target='_blank' rel='noopener'><strong>CommonMark</strong> specification</a>, written by the same author of Pandoc. Another reason for switching is that commonmark-hs and its extensions can be compiled to JavaScript via GHCJS<aside><p>See <a href='obelisk-tutorial' title='WikiLinkNormal' class='text-black-600 font-bold hover:bg-gray-50'>Obelisk tutorial, Markdown preview with Reflex</a> for a description of the development workflow involving writing Haskell on the frontend.</p></aside>, which is useful when reusing the Haskell code with the web app (see below).</p></div>
          </div>
        </li>
      
        <li>
          <a class='text-pink-600 font-bold hover:bg-pink-50' href='neuron-0.6'>
            Neuron 0.6 released
          </a>
          <div class='mb-4 overflow-auto text-sm text-gray-500'>
            <!-- TODO: How to style the backlinks list item element? Or render each separately?
                    -->
            <div><p>See <a href='obelisk-tutorial' title='WikiLinkNormal' class='text-black-600 font-bold hover:bg-gray-50'>Obelisk tutorial, Markdown preview with Reflex</a> for a description of the development workflow involving writing Haskell on the frontend.</p></div>
          </div>
        </li>
      
    </ul>
  </div>

            
  <section class='flex flex-wrap items-end justify-center my-4 space-x-2 space-y-2 font-mono text-sm'>
    
      <a title='Tag' class='px-1 bg-gray-100 rounded hover:bg-gray-50 hover:text-pink-500' href='@tags#blog'>
        <!-- DoNotFormat -->
        #blog
        <!-- DoNotFormat -->
      </a>
    
      <a title='Tag' class='px-1 bg-gray-100 rounded hover:bg-gray-50 hover:text-pink-500' href='@tags#nojs'>
        <!-- DoNotFormat -->
        #nojs
        <!-- DoNotFormat -->
      </a>
    
  </section>

          </main>
          <footer class='flex items-center justify-center mt-2 mb-8 space-x-4 text-center text-gray-500'>
  <div class='flex space-x-2'>
    <div><a class='font-bold' href='@index'>@Index</a></div>
    <div>|</div>
    <div>Powered by <a class='font-bold' href='https://note.ema.srid.ca/'>Emanote</a>
      0.1.0.2
    </div>
    <div>|</div>
    <div><a class='font-bold' href='@tags'>@Tags</a></div>
  </div>
</footer>
        </div>
      </div>
    </div>
  
</body>

</html>