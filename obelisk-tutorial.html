<html lang='en'>

<head>
  <meta charset='UTF-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <title>
    Obelisk tutorial, Markdown preview with Reflex ‚Äì Sridhar Ratnakumar
  </title>
  
    
      <meta property='og:description' content />
      <meta property='og:site_name' content='Srid' />
    
    
      <base href='/' />
      <link href='static/favicon.jpeg' rel='icon' />
    
    <link href='https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-tomorrow.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/combine/npm/prismjs@1.23.0/prism.min.js,npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js'></script>
<link rel='stylesheet' href='static/background-pattern.css' />

  
  <!-- CSSSTART -->
	<link rel="stylesheet" href="emanote-compiled-a45a19856026b2b9156833317f8acddc.css" />
  <!-- CSSEND -->

  <!-- Heist error element -->
  <style type='text/css'>
    strong.error {
      color: lightcoral;
      font-size: 90%;
      font-family: monospace;
    }
  </style>
  <!-- What goes in this file will appear on near the end of <head>--><link rel='preload' href='_emanote-static/fonts/Nunito/Nunito-Regular.ttf' as='font' type='font/ttf' crossorigin />
<link rel='preload' href='_emanote-static/fonts/Nunito/Nunito-ExtraBold.ttf' as='font' type='font/ttf' crossorigin />

<style>
  @font-face {
    font-family: 'Nunito';
    src: url('_emanote-static/fonts/Nunito/Nunito-Regular.ttf') format("truetype");
    font-display: swap;
  }

  @font-face {
    font-family: 'Nunito-Bold';
    src: url('_emanote-static/fonts/Nunito/Nunito-ExtraBold.ttf') format("truetype");
    font-display: swap;
  }

  body {
    font-family: 'Nunito', sans-serif;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  header {
    font-family: 'Nunito-Bold', sans-serif;
  }
</style>
</head>

<!-- DoNotFormat -->


<!-- DoNotFormat -->

<body class='overflow-y-scroll bg-gray-400'>
  
    <div class='container mx-auto'>

      
  <nav id='breadcrumbs' class='w-full text-gray-700 md:hidden'>
    <div class='flex justify-left'>
      <div class='w-full px-2 py-2 bg-gray-50'>
        <ul class='flex flex-wrap text-lg'>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href=''>
                Sridhar Ratnakumar
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href='software'>
                <span class='emoji' data-emoji='floppy_disk' style='font-family: emoji'>üíæ</span> Software
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href='haskell'>
                Haskell
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href='reflex-frp'>
                Reflex-FRP
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href='obelisk'>
                Obelisk
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
        </ul>
      </div>
    </div>
  </nav>


      <div class='flex flex-nowrap bg-gray-50 md:mt-8 md:shadow-2xl md:mb-8'>
        <!-- Sidebar column -->
        <nav id='sidebar' class='flex-shrink hidden leading-relaxed md:block md:sticky md:top-0 md:h-full md:w-48 xl:w-64'>
          <div class='px-2 py-2 text-gray-800'>

            <div id='indexing-links' class='flex flex-row float-right p-2 space-x-2 text-gray-500'>
              <a href='-/tags' title='View tags'>
                <svg style='width: 1rem;' class='hover:text-pink-700' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                  <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z'>
                  </path>
                </svg>
              </a>
              <a href='-/all' title='Expand full tree'>
                <svg style='width: 1rem;' class='hover:text-pink-700' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                  <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4'>
                  </path>
                </svg>
              </a>
            </div>

            <div id='site-logo' class='pl-2'>
              <div class='flex items-center my-2 space-x-2 justify-left'>
                <a href='' title='Go to Home'>
                  
                    
                      <!-- The style width attribute here is to prevent huge
                      icon from displaying at those rare occasions when Tailwind
                      hasn't kicked in immediately on page load 
                      -->
                      <img style='width: 1rem;' class='transition transform hover:scale-110 hover:opacity-80' src='static/favicon.jpeg' />
                    
                  
                </a>
                <a class='font-bold truncate' title='Go to Home' href=''>
                  Home
                </a>
              </div>
            </div>

            
              <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Blog' href='blog'>
      Blog
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            
              <!-- Variable bindings for this tree-->
  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='üìΩÔ∏è Projects' href='projects'>
      <span class='emoji' data-emoji='film_projector' style='font-family: emoji'>üìΩÔ∏è</span> Projects
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Ema' href='ema'>
      Ema
    </a>
    
      
        <span class='text-gray-300' title='1 children inside'>
          1
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Emanote' href='emanote'>
      Emanote
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Neuron' href='neuron'>
      Neuron
    </a>
    
      
        <span class='text-gray-300' title='8 children inside'>
          8
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Experimental' href='projects-experimental'>
      Experimental
    </a>
    
      
        <span class='text-gray-300' title='2 children inside'>
          2
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
  
</div>
            
              <!-- Variable bindings for this tree-->
  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='üíæ Software' href='software'>
      <span class='emoji' data-emoji='floppy_disk' style='font-family: emoji'>üíæ</span> Software
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='A brief F# exploration' href='fsharp-exploration'>
      A brief F# exploration
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Apps I use' href='apps'>
      Apps I use
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Dhall' href='dhall'>
      Dhall
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='Haskell' href='haskell'>
      Haskell
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Creating a new Haskell project with IDE support using Nix' href='haskell-new-project'>
      Creating a new Haskell project with IDE support using Nix
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Edit XMonad configuration with IDE support' href='xmonad-conf-ide'>
      Edit XMonad configuration with IDE support
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Haskell Gotchas' href='haskell-gotchas'>
      Haskell Gotchas
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Heist mini-tutorial' href='heist-start'>
      Heist mini-tutorial
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='My release process for Haskell libraries' href='haskell-release-process'>
      My release process for Haskell libraries
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='Reflex-FRP' href='reflex-frp'>
      Reflex-FRP
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->
  
    
      
      
    



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-700' viewBox='0 0 20 20' fill='currentColor'>
        <path fill-rule='evenodd' d='M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z' clip-rule='evenodd'></path>
        <path d='M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z'></path>
      </svg>
      
  
    <a class='font-bold hover:underline truncate' title='Obelisk' href='obelisk'>
      Obelisk
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
      <!-- Variable bindings for this tree-->
  
  


  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z'>
        </path>
      </svg>
      
  
    <a class='font-bold text-pink-600 hover:underline truncate' title='Obelisk tutorial, Markdown preview with Reflex' href='obelisk-tutorial'>
      Obelisk tutorial, Markdown preview with Reflex
    </a>
    
      
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
    
  
</div>
    
  
</div>
    
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='ghcid' href='ghcid'>
      ghcid
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Linux' href='linux'>
      Linux
    </a>
    
      
        <span class='text-gray-300' title='3 children inside'>
          3
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Nix' href='nix'>
      Nix
    </a>
    
      
        <span class='text-gray-300' title='3 children inside'>
          3
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='No JavaScript' href='nojs'>
      No JavaScript
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Pass with GPG' href='pass'>
      Pass with GPG
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='PureScript' href='purescript'>
      PureScript
    </a>
    
      
        <span class='text-gray-300' title='1 children inside'>
          1
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Rust' href='rust'>
      Rust
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  


<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg class='w-4 h-4 flex-shrink-0 inline' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'>
        </path>
      </svg>
    
  
    <a class='hover:underline truncate' title='VSCode' href='vscode'>
      VSCode
    </a>
    
      
        
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
      <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='Windows' href='windows'>
      Windows
    </a>
    
      
        <span class='text-gray-300' title='1 children inside'>
          1
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
    
  
</div>
            
              <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='üíª Hardware' href='hw'>
      <span class='emoji' data-emoji='computer' style='font-family: emoji'>üíª</span> Hardware
    </a>
    
      
        <span class='text-gray-300' title='4 children inside'>
          4
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            
              <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='üß† Thoughts' href='thoughts'>
      <span class='emoji' data-emoji='brain' style='font-family: emoji'>üß†</span> Thoughts
    </a>
    
      
        <span class='text-gray-300' title='3 children inside'>
          3
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            
              <!-- Variable bindings for this tree-->
  
    
  



  
  

<!-- Rendering of this tree -->
<div class='pl-2'>
  <!-- Node's rootLabel-->
  <div class='flex items-center my-2 space-x-2 justify-left'>
    
    
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline text-gray-500' viewBox='0 0 20 20' fill='currentColor'>
        <path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z'></path>
      </svg>
    
  
    <a class='hover:underline truncate' title='ü™ê Systems' href='systems'>
      <span class='emoji' data-emoji='ringed_planet' style='font-family: emoji'>ü™ê</span> Systems
    </a>
    
      
        <span class='text-gray-300' title='4 children inside'>
          4
        </span>
      
    
  </div>

  <!-- Node's children forest, displayed only on active trees
    TODO: Use <details> to toggle visibility?
  -->
  
</div>
            

          </div>
        </nav>

        <!-- Main body column -->
        <div class='flex-1 w-full overflow-x-auto bg-white'>
          <main class='px-4 py-4'>
            <h1 class='flex items-end justify-center mb-4 p-3 bg-pink-100 text-5xl font-extrabold text-black rounded'>
  <a class='z-40 tracking-tighter '>
    Obelisk tutorial, Markdown preview with Reflex
  </a>
</h1>
            <article class='overflow-auto'>
  <!-- What goes in this file will appear on top of note body-->
  
    <p class='mb-3'>
      In this article, I‚Äôll describe how to get a full-stack Haskell application up and running. In particular, the app will render user-entered Markdown text in real-time (the final version is hosted at <a href='https://commonmark.srid.ca' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>https://commonmark.srid.ca</a>). Notably, our app will use Haskell even on the frontend. This is made possible by the <a href='https://github.com/ghcjs/ghcjs' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>GHCJS</a> compiler, that compiles Haskell code to JavaScript.
    </p>
  
    <p class='mb-3'>
      We will not work directly with GHCJS, however, and instead will use the <a href='reflex-frp' class='text-pink-600 font-bold hover:underline' data-wikilink-type='WikiLinkNormal'>Reflex-FRP</a> library, through the excellent <a href='obelisk' class='text-pink-600 font-bold hover:underline' data-wikilink-type='WikiLinkTag'>Obelisk</a> full-stack framework.
    </p>
  <h2 id='create-an-obelisk-project' class='inline-block mt-6 mb-4 text-4xl font-bold text-gray-700 border-b-2'>Create an Obelisk project</h2>
    <p class='mb-3'>
      First and foremost, make sure you have <a href='https://github.com/obsidiansystems/obelisk#installing-obelisk' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>Obelisk installed</a>, and then follow along.
    </p>
  
    <p class='mb-3'>
      Obelisk includes a command called <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob</code> that can be used to initialize a project. We will also use git to keep track of changes:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='bash language-bash'>mkdir MarkdownPreview
cd ./MarkdownPreview
# Create an Obelisk project
ob init
# Add to git
git init
git add .
git commit -m "first commit"</code></pre></div>
    <p class='mb-3'>
      This gives us a project layout with three Haskell packages: <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>backend</code>, <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>common</code> and <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>frontend</code>. As the names indicate, <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>frontend</code> contains the Haskell code that ultimate gets compiled to JavaScript. The <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>common</code> package however contains code that is shared between the backend and the frontend. This is extremely useful for type sharing, which is impossible with something like Elm or PureScript (without explicit conversion).
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>backend
cabal.project
common
config
default.nix
frontend
shell.nix
static</code></pre></div>
    <p class='mb-3'>
      You will notice that Obelisk uses <a href='nix' class='text-pink-600 font-bold hover:underline' data-wikilink-type='WikiLinkNormal'>Nix</a> to build your project. The command <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> (described below) will abstract over the Nix stuff, including any GHCi handling, so you do not have to deal directly with Nix except for overriding dependencies.
    </p>
  <h2 id='running-hello-world' class='inline-block mt-6 mb-4 text-4xl font-bold text-gray-700 border-b-2'>Running hello world</h2>
    <p class='mb-3'>
      Now, it is time to run our app.
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>ob run</code></pre></div>
    <p class='mb-3'>
      This command may take a while to finish the very first time it is run, as it would need to download packages from the Nix caches. At the end you would expect to see: <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>Frontend running on http://localhost:8000/</code>. Your obelisk app will be accessible at that URL.
    </p>
  <h3 id='interlude-ob-run-reloads-your-code' class='mt-6 mb-2 text-3xl font-bold text-gray-700'>Interlude: <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> reloads your code</h3>
    <p class='mb-3'>
      So what does this <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> command do? Think of it as <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>stack run</code> or <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>cabal run</code> - but it also recompiles changed sources and reloads application. <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> uses <a href='https://github.com/ndmitchell/ghcid' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>ghcid</a> underneath, in combination with custom <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ghci</code> config to specify the modules to reload.
    </p>
  
    <p class='mb-3'>
      There is also <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob repl</code> which gives you a GHCi repl for your project. As well as <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob hoogle</code> providing a local Hoogle server for project and its dependencies.
    </p>
  <h2 id='add-commonmark-hs-dependency' class='inline-block mt-6 mb-4 text-4xl font-bold text-gray-700 border-b-2'>Add commonmark-hs dependency</h2>
    <p class='mb-3'>
      Our application will use the Pure Haskell Markdown parser <a href='https://github.com/jgm/commonmark-hs' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>commonmark-hs</a>, which is written by the author of Pandoc, who intends to <a href='https://github.com/jgm/commonmark-hs/issues/1#issuecomment-395802118' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>migrate Pandoc over to it</a> eventually.
    </p>
  
    <p class='mb-3'>
      We will also use the latest version from Git, instead of Hackage. Some <a href='https://nixos.org/nix/' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>Nix-fu</a> is helpful at this stage. But the main thing you need to know, in order to add a custom Haskell dependency, is the following general workflow:
    </p>
  
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          Clone the git repo under a subdirectory
        </li>
      
        <li>
          ‚ÄúPack‚Äù it using <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob thunk</code>
        </li>
      
        <li>
          Load it in <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>default.nix</code> using <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>hackGet</code>
        </li>
      
    </ul>
  
    <p class='mb-3'>
      As briefly as possible, you would do this for commonmark-hs as follows:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'># Get the source
git clone https://github.com/jgm/commonmark-hs.git dep/commonmark-hs
...
# Pack it
ob thunk pack dep/commonmark-hs
...</code></pre></div>
    <p class='mb-3'>
      Next, edit your <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>default.nix</code> and:
    </p>
  
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          Add <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>hackGet</code> and <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>pkgs</code> as arguments to the <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>project</code> if they don‚Äôt already exist
        </li>
      
        <li>
          Use the packed thunk by calling <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>hackGet</code>
        </li>
      
        <li>
          The git rep contains multiple Haskell packages; use <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>commonmark</code> and <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>commonmark-extensions</code>
        </li>
      
    </ul>
  
    <p class='mb-3'>
      Here‚Äôs how your <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>default.nix</code> should look:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>project ./. ({ pkgs, hackGet, ... }: {
  packages = let 
    commonmarkSrc = hackGet ./dep/commonmark-hs;
  in {
    commonmark = commonmarkSrc + "/commonmark";
    commonmark-extensions = commonmarkSrc + "/commonmark-extensions";
  };
  ...
})</code></pre></div>
    <p class='mb-3'>
      If you run <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> at this point, it may complain about further missing dependencies. Let‚Äôs override each of them:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>git clone https://github.com/jgm/emojis.git dep/emojis
ob thunk pack dep/emojis</code></pre></div>
    <p class='mb-3'>
      Go back to <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>default.nix</code>, and add this new dependency to the <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>packages</code> attribute:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>    ...
    emojis = hackGet ./dep/emojis;</code></pre></div>
    <p class='mb-3'>
      As we will be using commonmark directly in the frontend, go ahead and add these to <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>frontend.cabal</code> (under the library stanza):
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='haskell language-haskell'>-- frontend/frontend.cabal
               ...
               , commonmark
               , commonmark-extensions
  </code></pre></div>
    <p class='mb-3'>
      Restart <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code>, which should build the the new dependency before starting our app.
    </p>
  <h3 id='interlude-what-is-an-obelisk-thunk' class='mt-6 mb-2 text-3xl font-bold text-gray-700'>Interlude: What is an Obelisk thunk?</h3>
    <p class='mb-3'>
      If you are familiar with <a href='https://www.srid.ca/1948201.html#overriding-dependencies' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>Haskell overrides in Nix</a>, then think of the obelisk thunk mechanism as an abstraction on top. A ‚Äúpacked‚Äù thunk is essentially similar to Nix‚Äôs <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>fetchGit</code> in that you specify the exact source revision of the dependency to use.
    </p>
  
    <p class='mb-3'>
      But a thunk can also be ‚Äúunpacked‚Äù, using <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob thunk unpack</code>, which ‚Äì in addition to unpacking it as a git clone ‚Äì has the effect of adding it to <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> and <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob repl</code> sessions. For example, you could unpack the above commonmark thunk using <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob thunk unpack dep/commonmark-hs</code> and restart <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code>. Now, when you hack on <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>./dep/commonmark-hs</code> and change its Haskell sources, <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> will automatically reload the app using the modified commonmark-hs. See the Obelisk <a href='https://github.com/obsidiansystems/obelisk/blob/master/ChangeLog.md#v0500---2020-02-07' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>ChangeLog</a> for details.
    </p>
  <h2 id='lets-add-a-textbox' class='inline-block mt-6 mb-4 text-4xl font-bold text-gray-700 border-b-2'>Let‚Äôs add a textbox</h2>
    <p class='mb-3'>
      If you are unfamiliar with Reflex, checkout <a href='https://reflex-frp.org/get-started' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>the official guide</a>. All our frontend code is defined in the <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>frontend/src/Frontend.hs</code> file. With <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> running by side, open that module and try changing a few things, like the title - and the app should update. Let‚Äôs add a textbox element where the user would write their Markdown text.
    </p>
  
    <p class='mb-3'>
      Somewhere in <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>_frontend_body</code>, add the following:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='haskell language-haskell'>markdownText :: Dynamic t T.Text &lt;-
  fmap value $ textAreaElement $
    def
    & initialAttributes .~ ("style" =: "width:50%;height:15em;")</code></pre></div>
    <p class='mb-3'>
      <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>markdownText</code> is a reflex Dynamic that holds the user-entered text.
    </p>
  <h2 id='parse-markdown' class='inline-block mt-6 mb-4 text-4xl font-bold text-gray-700 border-b-2'>Parse Markdown</h2>
    <p class='mb-3'>
      Now it is time to actually use the commonmark library. Let‚Äôs import it:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='haskell language-haskell'>import qualified Commonmark as CM

renderMarkdown :: T.Text -&gt; Either CM.ParseError (CM.Html ())
renderMarkdown =
  CM.commonmark "markdown"</code></pre></div>
    <p class='mb-3'>
      The <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>renderMarkdown</code> function will parse our Markdown and return the HTML representation of it. Calling <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>show</code> on the Right value gets us the raw HTML.
    </p>
  <h2 id='render-to-html' class='inline-block mt-6 mb-4 text-4xl font-bold text-gray-700 border-b-2'>Render to HTML</h2>
    <p class='mb-3'>
      Finally let‚Äôs plug everything together. We want to parse and render the resulting HTML every time the user changes the textbox. Reflex‚Äôs Dynamic automatically updates, so let‚Äôs use that.
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='haskell language-haskell'>result &lt;- eitherDyn $ fmap renderMarkdown markdownText
dyn_ $ ffor result $ \case
  Left err -&gt;
    dyn_ $ ffor err $ \_ -&gt; text "Parse error"
  Right htmlVal -&gt;
    prerender_ blank $ void $ elDynHtml' "div" $ T.pack . show &lt;$&gt; htmlVal
</code></pre></div>
    <p class='mb-3'>
      That‚Äôs all it takes! Now as you type the Markdown text, its live preview will automatically update next to the textbox.
    </p>
  
    <p class='mb-3'>
      You can even hack on commonmark-hs (see the Obelisk thunk interlude above), and have <code class='py-0.5 px-1 rounded bg-gray-700 text-sm text-white'>ob run</code> automatically reload when the library sources change. This is extremely handy if you want to play with the internals of the Markdown parser and see its live result in the browser.
    </p>
  <h2 id='further-resources' class='inline-block mt-6 mb-4 text-4xl font-bold text-gray-700 border-b-2'>Further resources</h2>
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          
    <p class='mb-3'>
      Source code for this app on Github: <a href='https://github.com/srid/MarkdownPreview' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>https://github.com/srid/MarkdownPreview</a>
    </p>
  
        </li>
      
        <li>
          
    <p class='mb-3'>
      Fully built version of it running at: <a href='https://commonmark.srid.ca/' class='text-pink-600 hover:underline' target='_blank' rel='noopener'>https://commonmark.srid.ca/</a>
    </p>
  
        </li>
      
    </ul>
  
</article>
            
  <div class='p-4 mt-8 bg-gray-100 rounded'>
    <header class='mb-2 text-xl font-semibold text-gray-500'>Links to this page</header>
    <ul class='space-y-1'>
      
        <li>
          <a class='text-pink-600 font-bold hover:bg-pink-50' href='neuron-v06'>
            Neuron 0.6 released
          </a>
          <div class='mb-4 overflow-auto text-sm text-gray-500'>
            <!-- TODO: How to style the backlinks list item element? Or render each separately?
              Also, group contexts from same source.
            -->
            <div><p>Previous versions of neuron used the <a href='https://hackage.haskell.org/package/mmark' class='text-gray-600 hover:underline' target='_blank' rel='noopener'>mmark</a> parser which advertises itself as being ‚Äústrict‚Äù. This prevented certain links from working as they caused the parser to fail. In version 0.6, I switched over to use <a href='https://github.com/jgm/commonmark-hs' class='text-gray-600 hover:underline' target='_blank' rel='noopener'>commonmark-hs</a>, which is the Haskell implementation of the <a href='https://commonmark.org/' class='text-gray-600 hover:underline' target='_blank' rel='noopener'><strong>CommonMark</strong> specification</a>, written by the same author of Pandoc. Another reason for switching is that commonmark-hs and its extensions can be compiled to JavaScript via GHCJS<sup>*</sup>, which is useful when reusing the Haskell code with the web app (see below).</p></div>
          </div>
        </li>
      
        <li>
          <a class='text-pink-600 font-bold hover:bg-pink-50' href='neuron-v06'>
            Neuron 0.6 released
          </a>
          <div class='mb-4 overflow-auto text-sm text-gray-500'>
            <!-- TODO: How to style the backlinks list item element? Or render each separately?
              Also, group contexts from same source.
            -->
            <div><p>See <a href='obelisk-tutorial' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>Obelisk tutorial, Markdown preview with Reflex</a> for a description of the development workflow involving writing Haskell on the frontend.</p></div>
          </div>
        </li>
      
    </ul>
  </div>

            
  <section class='flex flex-wrap items-end justify-center my-4 space-x-2 space-y-2 font-mono text-sm'>
    
      <a title='Tag' class='px-1 bg-gray-100 rounded hover:bg-gray-50 hover:text-pink-500' href='-/tags/blog'>
        <!-- DoNotFormat -->
        #blog
        <!-- DoNotFormat -->
      </a>
    
      <a title='Tag' class='px-1 bg-gray-100 rounded hover:bg-gray-50 hover:text-pink-500' href='-/tags/nojs'>
        <!-- DoNotFormat -->
        #nojs
        <!-- DoNotFormat -->
      </a>
    
  </section>

          </main>
        </div>
      </div>
      <footer class='flex items-center justify-center mt-2 mb-8 space-x-4 text-center text-gray-800'>
  <div>
    <a href=''>
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4 h-4 flex-shrink-0 inline' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6'></path>
      </svg>
    </a>
  </div>
  <div>
    Generated by <a class='font-bold' href='https://note.ema.srid.ca/'>Emanote</a>
    
      
        <span class='font-mono text-sm tracking-tighter' title='And rendered with /templates/layouts/book'>
          0.1.42.0
        </span>
      
    
  </div>
  <div>
    <a href='-/all' title='View Index'>
      <svg style='width: 1rem;' class='hover:text-pink-700' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4'>
        </path>
      </svg>
    </a>

  </div>
</footer>
    </div>
  
</body>

</html>